@page "/CreateNewUser"
@using Core
@inject NavigationManager NavigationManager

<h3>Opret ny bruger</h3>

<EditForm Model="@newUser" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="user-form-box">
        <div class="form-group">
            <label for="userName">Fornavn:</label>
            <InputText id="userName" class="form-control" @bind-Value="newUser.UserName" />
        </div>

        <div class="form-group">
            <label for="email">Mail:</label>
            <InputText id="email" class="form-control" @bind-Value="newUser.UserEmail" />
        </div>

        <div class="form-group">
            <label for="phone">Telefonnummer:</label>
            <InputText id="phone" class="form-control" @bind-Value="newUser.UserPhone" />
        </div>

        <div class="form-group">
            <label for="password">Adgangskode:</label>
            <InputText id="password" type="password" class="form-control" @bind-Value="newUser.UserPassword" />
        </div>

        <div class="form-group">
            <label for="role">Rolle:</label>
            <InputSelect id="role" class="form-control" @bind-Value="newUser.Role">
                <option value="">-- Vælg rolle --</option>
                <option value="Elev">Elev</option>
                <option value="Køkkenleder">Køkkenleder</option>
                <option value="HR">HR</option>
            </InputSelect>
        </div>
        
        <button class="btn btn-primary" type="submit">Opret</button>
    </div>
</EditForm>

@code {
    private User newUser = new();
    private DateTime? userSemesterDate;

    private void HandleValidSubmit()
    {
        if (userSemesterDate.HasValue)
        {
            newUser.UserSemester = DateOnly.FromDateTime(userSemesterDate.Value);
        }
        
        Console.WriteLine($"Bruger oprettet: {newUser.UserName} ({newUser.Role})");

    }
}
