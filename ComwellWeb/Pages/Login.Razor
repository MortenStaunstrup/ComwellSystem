@page "/login"
@using ComwellWeb.Services.Interfaces
@inject IUserService userService
@inject NavigationManager nav     

<h3>Log ind</h3>

<input @bind="email" placeholder="Email" />           <!-- Email input -->
<input @bind="password" type="password" placeholder="Adgangskode" />  <!-- Password input -->
<button @onclick="TryLogin">Log ind</button>          <!-- Knap til at starte login -->

<p>@message</p>  <!-- Viser besked, fx fejl ved login -->

@code {
    string email;
    string password;
    string message;

    // Kører når brugeren klikker login
    private async Task TryLogin()
    {
        var user = await userService.Login(email, password);  // Prøv at logge ind via service

        if (user != null && !string.IsNullOrEmpty(user.UserEmail))
        {
            // Login gik godt = naviger til forsiden
            nav.NavigateTo("/", forceLoad: true);
        }
        else
        {
            message = "Wrong Username or Password";  // Fejlbesked hvis login fejler
        }
    }
}