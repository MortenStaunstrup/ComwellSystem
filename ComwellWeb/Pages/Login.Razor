@page "/"
@page "/login"
@using ComwellWeb.Services.Interfaces
@inject IUserService userService
@inject NavigationManager nav     
<div class="login-container">
    <div class="login-box">
        <h2>Log ind</h2>
        <input @bind="email" placeholder="Email" class="login-input" />
        <input @bind="password" type="password" placeholder="Adgangskode" class="login-input" />
        <p class="login-message">@message</p>
        <button @onclick="TryLogin" class="login-button">Log ind</button>
    </div>
</div>


@code {
    string email;
    string password;
    string message;

    // Kører når brugeren klikker login
    private async Task TryLogin()
    {
        var user = await userService.Login(email, password);  // Prøv at logge ind via service

        if (user != null && !string.IsNullOrEmpty(user.UserEmail))
        {
            // Login gik godt = naviger til forsiden
            nav.NavigateTo("/MyProfile", forceLoad: true);
        }
        else
        {
            message = "Wrong Username or Password";  // Fejlbesked hvis login fejler
        }
    }
    
}